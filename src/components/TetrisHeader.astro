---
import { motion } from "framer-motion";
---

<header>
  <h1 id="tetris-header">
    <motion.div class="letter" data-letter="V" client:load>
      <motion.div class="block" /><motion.div class="block" /><motion.div class="block" />
      <motion.div class="block" /><motion.div class="block" /><motion.div class="block" />
      <motion.div class="block" /><motion.div class="block" /><motion.div class="block" />
    </motion.div>
    <motion.div class="letter" data-letter="A" client:load>
      <motion.div class="block" /><motion.div class="block" /><motion.div class="block" />
      <motion.div class="block" /><motion.div class="block" /><motion.div class="block" />
      <motion.div class="block" /><motion.div class="block" /><motion.div class="block" />
    </motion.div>
    <motion.div class="letter" data-letter="L" client:load>
      <motion.div class="block" /><motion.div class="block" /><motion.div class="block" />
      <motion.div class="block" /><motion.div class="block" /><motion.div class="block" />
      <motion.div class="block" /><motion.div class="block" /><motion.div class="block" />
    </motion.div>
    <motion.div class="letter" data-letter="'" client:load>
      <motion.div class="block" />
      <motion.div class="block" />
    </motion.div>
    <motion.div class="letter" data-letter="S" client:load>
      <motion.div class="block" /><motion.div class="block" /><motion.div class="block" />
      <motion.div class="block" /><motion.div class="block" /><motion.div class="block" />
      <motion.div class="block" /><motion.div class="block" /><motion.div class="block" />
    </motion.div>
    <div class="spacer"></div>
    <motion.div class="letter" data-letter="T" client:load>
      <motion.div class="block" /><motion.div class="block" /><motion.div class="block" />
      <motion.div class="block" /><motion.div class="block" /><motion.div class="block" />
      <motion.div class="block" /><motion.div class="block" /><motion.div class="block" />
    </motion.div>
    <motion.div class="letter" data-letter="H" client:load>
      <motion.div class="block" /><motion.div class="block" /><motion.div class="block" />
      <motion.div class="block" /><motion.div class="block" /><motion.div class="block" />
      <motion.div class="block" /><motion.div class="block" /><motion.div class="block" />
    </motion.div>
    <motion.div class="letter" data-letter="O" client:load>
      <motion.div class="block" /><motion.div class="block" /><motion.div class="block" />
      <motion.div class="block" /><motion.div class="block" /><motion.div class="block" />
      <motion.div class="block" /><motion.div class="block" /><motion.div class="block" />
    </motion.div>
    <motion.div class="letter" data-letter="U" client:load>
      <motion.div class="block" /><motion.div class="block" /><motion.div class="block" />
      <motion.div class="block" /><motion.div class="block" /><motion.div class="block" />
      <motion.div class="block" /><motion.div class="block" /><motion.div class="block" />
    </motion.div>
    <motion.div class="letter" data-letter="G" client:load>
      <motion.div class="block" /><motion.div class="block" /><motion.div class="block" />
      <motion.div class="block" /><motion.div class="block" /><motion.div class="block" />
      <motion.div class="block" /><motion.div class="block" /><motion.div class="block" />
    </motion.div>
    <motion.div class="letter" data-letter="H" client:load>
      <motion.div class="block" /><motion.div class="block" /><motion.div class="block" />
      <motion.div class="block" /><motion.div class="block" /><motion.div class="block" />
      <motion.div class="block" /><motion.div class="block" /><motion.div class="block" />
    </motion.div>
    <motion.div class="letter" data-letter="T" client:load>
      <motion.div class="block" /><motion.div class="block" /><motion.div class="block" />
      <motion.div class="block" /><motion.div class="block" /><motion.div class="block" />
      <motion.div class="block" /><motion.div class="block" /><motion.div class="block" />
    </motion.div>
    <motion.div class="letter" data-letter="S" client:load>
      <motion.div class="block" /><motion.div class="block" /><motion.div class="block" />
      <motion.div class="block" /><motion.div class="block" /><motion.div class="block" />
      <motion.div class="block" /><motion.div class="block" /><motion.div class="block" />
    </motion.div>
  </h1>
</header>

<style>
  header {
    margin-bottom: 2rem;
    overflow-x: auto;
  }
  #tetris-header {
    display: flex;
    justify-content: center;
    gap: 0.5rem;
    font-size: 2rem;
    font-weight: bold;
  }
  .letter {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 2px;
    width: 3rem;
    height: 4rem;
  }
  .block {
    background-color: #333;
    border: 1px solid #555;
  }
  .spacer {
    width: 1rem;
  }
  .letter[data-letter="'"] {
    grid-template-columns: 1fr;
    width: 1rem;
  }

  @media (max-width: 768px) {
    #tetris-header {
      font-size: 1.5rem;
    }
    .letter {
      width: 2.25rem;
      height: 3rem;
    }
    .spacer {
      width: 0.75rem;
    }
    .letter[data-letter="'"] {
      width: 0.75rem;
    }
  }
</style>

<script>
  import { animate, stagger } from "framer-motion";

  function animateBlocks() {
    const letters = document.querySelectorAll('.letter');
    letters.forEach((letter, letterIndex) => {
      const blocks = letter.querySelectorAll('.block');
      animate(blocks, { backgroundColor: ["#333", "#fff"] }, {
        delay: stagger(0.05, { from: "first", ease: "easeInOut" }),
        duration: 0.5,
        ease: "easeInOut",
        repeat: Infinity,
        repeatDelay: 5,
        repeatType: "reverse",
      });
    });
  }

  document.addEventListener('astro:page-load', animateBlocks);
</script>
